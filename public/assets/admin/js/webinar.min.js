!function(e){"use strict";function t(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=0;a<5;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function a(t,a){var n=t.serializeObject(),i=t.attr("action");a.addClass("loadingbar gray").prop("disabled",!0),t.find("input").removeClass("is-invalid"),t.find("textarea").removeClass("is-invalid"),e.post(i,n,function(e){e&&200===e.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(e){a.removeClass("loadingbar gray").prop("disabled",!1);var n=e.responseJSON;n&&"zoom_jwt_token_invalid"===n.status&&Swal.fire({icon:"error",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+zoomJwtTokenInvalid+"</h3>",showConfirmButton:!1,width:"25rem"}),n&&n.errors&&Object.keys(n.errors).forEach(function(e){var a=n.errors[e],i=t.find('[name="'+e+'"]');"zoom-not-complete-alert"===e?t.find(".js-zoom-not-complete-alert").removeClass("d-none"):(i.addClass("is-invalid"),i.parent().find(".invalid-feedback").text(a[0]))})})}function n(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.attr("data-ticket-id"),i=t.attr("data-webinar-id"),l={item_id:i,locale:a};e.post("/admin/tickets/"+n+"/edit",l,function(t){if(t&&t.ticket){var a=t.ticket,l='<div id="addTicketModal">';l+=e("#webinarTicketModal").html(),l=(l+="</div>").replaceAll("/admin/tickets/store","/admin/tickets/"+n+"/update"),Swal.fire({html:l,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){e(".date-range-picker").daterangepicker({locale:{format:"YYYY-MM-DD"},drops:"down",opens:"right",startDate:moment(1e3*a.start_date).toDate(),endDate:moment(1e3*a.end_date).toDate()}),delete a.start_date,delete a.end_date,Object.keys(a).forEach(function(t){e("#addTicketModal").find('[name="'+t+'"]').val(a[t])});var t=e("#addTicketModal").find('select[name="locale"]');t&&(t.addClass("js-edit-ticket-locale-ajax"),t.attr("data-ticket-id",n),t.attr("data-webinar-id",i))}})}})}function i(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=a.attr("data-chapter-id"),l=a.attr("data-webinar-id"),o={item_id:l,locale:n};e.post("/admin/chapters/"+i+"/edit",o,function(a){if(a&&a.chapter){var n=a.chapter,o='<div id="editChapterModal">';o+=e("#webinarChapterModal").html(),o=(o+="</div>").replaceAll("/admin/chapters/store","/admin/chapters/"+i+"/update");var s=t();o=o.replaceAll("record",s),Swal.fire({html:o,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var t=e("#editChapterModal");Object.keys(n).forEach(function(e){if("status"===e){var a="active"===n.status;t.find('[name="'+e+'"]').prop("checked",a)}else t.find('[name="'+e+'"]').val(n[e])});var a=t.find('select[name="locale"]');a&&(a.addClass("js-edit-chapter-locale-ajax"),a.attr("data-chapter-id",i),a.attr("data-webinar-id",l))}})}})}function l(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=a.attr("data-session-id"),l=a.attr("data-webinar-id"),o={item_id:l,locale:n};e.post("/admin/sessions/"+i+"/edit",o,function(a){if(a&&a.session){var n=a.session,o='<div id="addSessionModal">';o+=e("#webinarSessionModal").html(),o=(o+="</div>").replaceAll("/admin/sessions/store","/admin/sessions/"+i+"/update");var s=t();o=o.replaceAll("record",s),Swal.fire({html:o,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var t=e("#addSessionModal");e(".datetimepicker").daterangepicker({locale:{format:"YYYY-MM-DD HH:mm"},singleDatePicker:!0,timePicker:!0,timePicker24Hour:!0,startDate:moment(1e3*n.date).toDate()}),delete n.date,Object.keys(n).forEach(function(e){if("session_api"===e)t.find('.js-api-input[value="'+n[e]+'"]').prop("checked",!0),"local"!==n[e]&&(t.find(".js-api-input").prop("disabled",!0),t.find(".js-ajax-api_secret").prop("disabled",!0),t.find(".js-ajax-date").prop("disabled",!0),t.find(".js-ajax-duration").prop("disabled",!0),t.find(".js-ajax-link").prop("disabled",!0)),"big_blue_button"===n[e]&&(t.find(".js-moderator-secret").removeClass("d-none"),t.find(".js-ajax-moderator_secret").prop("disabled",!0)),"zoom"===n[e]&&(t.find(".js-local-link").addClass("d-none"),t.find(".js-api-secret").addClass("d-none"),t.find(".js-moderator-secret").addClass("d-none"));else if("status"===e){var a="active"===n.status;t.find('[name="'+e+'"]').prop("checked",a)}else t.find('[name="'+e+'"]').val(n[e])});var a=t.find('select[name="locale"]');a&&(a.addClass("js-edit-session-locale-ajax"),a.attr("data-session-id",i),a.attr("data-webinar-id",l))}})}})}function o(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=a.attr("data-file-id"),l=a.attr("data-webinar-id"),o={item_id:l,locale:n};e.post("/admin/files/"+i+"/edit",o,function(a){if(a&&a.file){var n=a.file,o='<div id="addFilesModal">';o+=e("#webinarFileModal").html(),o=(o=(o+="</div>").replaceAll("/admin/files/store","/admin/files/"+i+"/update")).replaceAll("str_","");var s=t();o=o.replaceAll("record",s),Swal.fire({html:o,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var t=e("#addFilesModal");Object.keys(n).forEach(function(e){if("storage"===e)"online"===n[e]?(t.find('[name="'+e+'"]').val(n[e]),t.find(".local-input").addClass("d-none"),t.find(".online-inputs").removeClass("d-none"),t.find(".js-downloadable-file").addClass("d-none"),t.find(".js-downloadable-file input").prop("checked",!1)):(t.find(".local-input").removeClass("d-none"),t.find(".online-inputs").addClass("d-none"),t.find(".js-downloadable-file").removeClass("d-none"));else if("status"===e){var a="active"===n.status;t.find('[name="'+e+'"]').prop("checked",a)}else if("downloadable"===e){var i=1===n.downloadable||"1"===n.downloadable;t.find('input[name="'+e+'"]').prop("checked",i)}else t.find('[name="'+e+'"]').val(n[e])});var a=t.find('select[name="locale"]');a&&(a.addClass("js-edit-file-locale-ajax"),a.attr("data-file-id",i),a.attr("data-webinar-id",l))}})}})}function s(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.attr("data-faq-id"),i=t.attr("data-webinar-id"),l={item_id:i,locale:a};e.post("/admin/faqs/"+n+"/edit",l,function(t){if(t&&t.faq){var a=t.faq,l='<div id="addFAQsModal">';l+=e("#webinarFaqModal").html(),l=(l+="</div>").replaceAll("/admin/faqs/store","/admin/faqs/"+n+"/update"),Swal.fire({html:l,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var t=e("#addFAQsModal");Object.keys(a).forEach(function(e){t.find('[name="'+e+'"]').val(a[e])});var l=t.find('select[name="locale"]');l&&(l.addClass("js-edit-faq-locale-ajax"),l.attr("data-faq-id",n),l.attr("data-webinar-id",i))}})}})}function d(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=a.attr("data-text-id"),l=a.attr("data-webinar-id"),o={item_id:l,locale:n};e.post("/admin/test-lesson/"+i+"/edit",o,function(a){if(a&&a.testLesson){var n=a.testLesson,o=t(),s='<div id="addTestLessonModal">';s+=e("#webinarTestLessonModal").html(),s=(s=(s=(s=(s+="</div>").replaceAll("record",o)).replaceAll("/admin/test-lesson/store","/admin/test-lesson/"+i+"/update")).replaceAll("str_","")).replaceAll("attachments-select2","attachments-select2-"+o),Swal.fire({html:s,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var t=e("#addTestLessonModal"),a=[];Object.keys(n).forEach(function(e){if("attachments"===e)n[e]&&n[e].length&&Object.keys(n[e]).forEach(function(t){var i=n[e][t];i&&a.push(i.file_id)});else if("status"===e){var i="active"===n.status;t.find('[name="'+e+'"]').prop("checked",i)}else t.find('[name="'+e+'"]').val(n[e])}),e(".attachments-select2-"+o).select2({multiple:!0,width:"100%"}),e(".attachments-select2-"+o).val(a).change();var s=t.find(".js-content-summernote");s.length&&(s.val(n.content),s.summernote({tabsize:2,height:400,callbacks:{onChange:function(e,a){t.find(".js-hidden-content-summernote").val(e)}}}));var d=t.find('select[name="locale"]');d&&(d.addClass("js-edit-text-locale-ajax"),d.attr("data-text-id",i),d.attr("data-webinar-id",l))}})}})}e.fn.serializeObject=function(){var t={},a=this.serializeArray();return e.each(a,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},e("body").on("click",".close-swl",function(e){e.preventDefault(),Swal.close()}),e("#summernote").summernote({tabsize:2,height:400,placeholder:e("#summernote").attr("placeholder"),dialogsInBody:!0,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview"]]]}),e("body").on("click","#saveAndPublish",function(t){t.preventDefault(),e("#forDraft").val("publish"),e("#webinarForm").trigger("submit")}),e("body").on("click","#saveAsDraft",function(t){t.preventDefault(),e("#forDraft").val(1),e("#webinarForm").trigger("submit")}),e("body").on("click","#saveReject",function(t){t.preventDefault(),e("#forDraft").val("reject"),e("#webinarForm").trigger("submit")}),e("#partnerInstructorSwitch").on("change.bootstrapSwitch",function(t){t.target.checked?(e("#partnerInstructorInput").removeClass("d-none"),resetSelect2()):e("#partnerInstructorInput").addClass("d-none")}),e("body").on("change","#categories",function(t){t.preventDefault();var a=this.value;e.get("/admin/filters/get-by-category-id/"+a,function(t){if(t&&void 0!==t.filters&&t.filters.length){var a="";Object.keys(t.filters).forEach(function(e){var n=t.filters[e],i=[];n.options.length&&(i=n.options),a+='<div class="col-12 col-md-3">\n<div class="webinar-category-filters">\n<strong class="category-filter-title d-block">'+n.title+'</strong>\n<div class="py-10"></div>\n\n',i.length&&Object.keys(i).forEach(function(e){var t=i[e];a+='<div class="form-group mt-20 d-flex align-items-center justify-content-between">\n<label class="" for="filterOption'+t.id+'">'+t.title+'</label>\n<div class="custom-control custom-checkbox">\n<input type="checkbox" name="filters[]" value="'+t.id+'" class="custom-control-input" id="filterOption'+t.id+'">\n<label class="custom-control-label" for="filterOption'+t.id+'"></label>\n</div>\n</div>\n'}),a+="</div></div>"}),e("#categoriesFiltersContainer").removeClass("d-none"),e("#categoriesFiltersCard").html(a)}else e("#categoriesFiltersContainer").addClass("d-none"),e("#categoriesFiltersCard").html("")})}),e("body").on("click","#webinarAddTicket",function(t){t.preventDefault();var a='<div id="addTicketModal">';a+=e("#webinarTicketModal").html(),a+="</div>",Swal.fire({html:a,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"}),resetDatePickers()}),e("body").on("click","#saveTicket",function(t){t.preventDefault();var n=e(this);a(e("#addTicketModal form"),n)}),e("body").on("click","#webinarAddChapter",function(a){a.preventDefault();var n=t(),i=e("#webinarChapterModal");i.find("input").prop("disabled",!1);var l='<div id="addChapterModal">';l+=i.html(),l=(l+="</div>").replaceAll("record",n),Swal.fire({html:l,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"}),resetDatePickers()}),e("body").on("click","#webinarAddSession",function(a){a.preventDefault();var n=t(),i=e("#webinarSessionModal");i.find("input").prop("disabled",!1);var l='<div id="addSessionModal">';l+=i.html(),l=(l+="</div>").replaceAll("record",n),Swal.fire({html:l,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"}),resetDatePickers()}),e("body").on("change",".js-api-input",function(t){t.preventDefault();var a=e(this).closest(".session-form"),n=this.value;a.find(".js-zoom-not-complete-alert").addClass("d-none"),"big_blue_button"===n?(a.find(".js-local-link").addClass("d-none"),a.find(".js-api-secret").removeClass("d-none"),a.find(".js-moderator-secret").removeClass("d-none")):"zoom"===n?(a.find(".js-local-link").addClass("d-none"),a.find(".js-api-secret").addClass("d-none"),a.find(".js-moderator-secret").addClass("d-none")):(a.find(".js-local-link").removeClass("d-none"),a.find(".js-api-secret").removeClass("d-none"),a.find(".js-moderator-secret").addClass("d-none"))}),e("body").on("click","#saveSession",function(t){t.preventDefault();var n=e(this);a(e("#addSessionModal form"),n)}),e("body").on("click","#webinarAddFile",function(a){a.preventDefault();var n=t(),i='<div id="addFilesModal">';i+=e("#webinarFileModal").html(),i=(i=(i+="</div>").replaceAll("str_","")).replaceAll("record",n),Swal.fire({html:i,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),e("body").on("click","#saveFile",function(t){t.preventDefault();var n=e(this);a(e("#addFilesModal form"),n)}),e("body").on("click","#saveChapter",function(t){t.preventDefault();var n=e(this);a(n.closest("form"),n)}),e("body").on("click","#webinarAddPrerequisites",function(t){var a=this;t.preventDefault();var n='<div id="addPrerequisitesModal">';n+=e("#webinarPrerequisitesModal").html(),n=(n=(n+="</div>").replaceAll("prerequisites-select","prerequisites-select2")).replaceAll("str_",""),Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){e(".prerequisites-select2").select2({placeholder:e(a).data("placeholder"),minimumInputLength:3,allowClear:!0,ajax:{url:"/admin/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(t){return{term:t.term,webinar_id:e(this).data("webinar-id")}},processResults:function(t){return{results:e.map(t,function(e){return{text:e.title,id:e.id}})}}}})}})}),e("body").on("click","#savePrerequisites",function(t){t.preventDefault();var n=e(this);a(e("#addPrerequisitesModal form"),n)}),e("body").on("click","#webinarAddFAQ",function(t){t.preventDefault();var a='<div id="addFAQsModal">';a+=e("#webinarFaqModal").html(),a+="</div>",Swal.fire({html:a,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),e("body").on("click","#saveFAQ",function(t){t.preventDefault();var n=e(this);a(e("#addFAQsModal form"),n)}),e("body").on("click","#webinarAddQuiz",function(t){var a=this;t.preventDefault();var n='<div id="addQuizModal">';n+=e("#quizzesModal").html(),n=(n+="</div>").replaceAll("quiz-select2","quiz-select22"),Swal.fire({html:n,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"30rem",onOpen:function(){e(".quiz-select22").select2({placeholder:e(a).data("placeholder"),allowClear:!0,width:"100%"})}})}),e("body").on("click","#saveQuiz",function(t){t.preventDefault();var n=e(this);a(e("#addQuizModal form"),n)}),e("body").on("click",".edit-ticket",function(t){t.preventDefault();var a=e(this);loadingSwl(),n(a)}),e("body").on("change",".js-edit-ticket-locale-ajax",function(t){t.preventDefault();var a=e(this),i=a.val();n(a,i)}),e("body").on("click",".edit-chapter",function(t){t.preventDefault();var a=e(this);loadingSwl(),i(a)}),e("body").on("change",".js-edit-chapter-locale-ajax",function(t){t.preventDefault();var a=e(this),n=a.val();i(a,n)}),e("body").on("click",".edit-session",function(t){t.preventDefault();var a=e(this);loadingSwl(),l(a)}),e("body").on("change",".js-edit-session-locale-ajax",function(t){t.preventDefault();var a=e(this),n=a.val();l(a,n)}),e("body").on("click",".edit-file",function(t){t.preventDefault();var a=e(this);loadingSwl(),o(a)}),e("body").on("change",".js-edit-file-locale-ajax",function(t){t.preventDefault();var a=e(this),n=a.val();o(a,n)}),e("body").on("click",".edit-prerequisite",function(t){t.preventDefault();var a=e(this),n=a.attr("data-prerequisite-id"),i=a.attr("data-webinar-id");loadingSwl();var l={item_id:i};e.post("/admin/prerequisites/"+n+"/edit",l,function(t){var a=this;if(t&&t.prerequisite){var i=t.prerequisite,l='<div id="addPrerequisitesModal">';l+=e("#webinarPrerequisitesModal").html(),l=(l=(l=(l+="</div>").replaceAll("prerequisites-select","prerequisites-select2")).replaceAll("/admin/prerequisites/store","/admin/prerequisites/"+n+"/update")).replaceAll("str_",""),Swal.fire({html:l,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){e(".prerequisites-select2").append('<option selected="selected" value="'+i.webinar_id+'">'+i.webinar_title+"</option>"),1===i.required&&e("#addPrerequisitesModal").find('[name="required"]').prop("checked",!0),e(".prerequisites-select2").select2({placeholder:e(a).data("placeholder"),minimumInputLength:3,allowClear:!0,ajax:{url:"/admin/webinars/search",dataType:"json",type:"POST",quietMillis:50,data:function(t){return{term:t.term,webinar_id:e(this).data("webinar-id")}},processResults:function(t){return{results:e.map(t,function(e){return{text:e.title,id:e.id}})}}}})}})}})}),e("body").on("click",".edit-faq",function(t){t.preventDefault();var a=e(this);loadingSwl(),s(a)}),e("body").on("change",".js-edit-faq-locale-ajax",function(t){t.preventDefault();var a=e(this),n=a.val();s(a,n)}),e("body").on("click",".js-get-faq-description",function(t){t.preventDefault();var a='<div class="my-2">'+e(this).parent().find("input").val()+"</div>";Swal.fire({html:a,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"30rem"})}),e("body").on("click",".edit-webinar-quiz",function(t){t.preventDefault();var a=e(this),n=a.attr("data-webinar-quiz-id"),i=a.attr("data-webinar-id");loadingSwl();var l={item_id:i};e.post("/admin/webinar-quiz/"+n+"/edit",l,function(t){var a=this;if(t&&t.webinarQuiz){var i=t.webinarQuiz,l='<div id="addQuizModal">';l+=e("#quizzesModal").html(),l=(l=(l+="</div>").replaceAll("/admin/webinar-quiz/store","/admin/webinar-quiz/"+n+"/update")).replaceAll("quiz-select2","quiz-select22"),Swal.fire({html:l,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"30rem",onOpen:function(){e(".quiz-select22").append('<option selected="selected" value="'+i.id+'">'+i.title+"</option>"),e(".quiz-select22").select2({placeholder:e(a).data("placeholder"),allowClear:!0,width:"100%"}),e("#addQuizModal").find('[name="chapter_id"]').val(i.chapter_id)}})}})}),e("body").on("change",".js-file-storage",function(t){t.preventDefault();var a=this.value,n=e(this).closest("form");"online"===a?(n.find(".local-input").addClass("d-none"),n.find(".local-input input").val(""),n.find(".online-inputs").removeClass("d-none"),n.find(".js-downloadable-file").addClass("d-none"),n.find(".js-downloadable-file input").prop("checked",!1)):(n.find(".local-input input").val(""),n.find(".local-input").removeClass("d-none"),n.find(".online-inputs").addClass("d-none"),n.find(".js-downloadable-file").removeClass("d-none"),n.find(".js-downloadable-file input").prop("checked",!0))}),e("body").on("click","#webinarAddTestLesson",function(a){a.preventDefault();var n=t(),i='<div id="addTestLessonModal">';i+=e("#webinarTestLessonModal").html(),i=(i=(i+="</div>").replaceAll("record",n)).replaceAll("attachments-select2","attachments-select2-"+n),Swal.fire({html:i,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){e(".attachments-select2-"+n).select2({multiple:!0,width:"100%"});var t=e("#addTestLessonModal"),a=t.find(".js-content-summernote");a.length&&a.summernote({tabsize:2,height:400,callbacks:{onChange:function(e,a){t.find(".js-hidden-content-summernote").val(e)}}})}})}),e("body").on("click","#saveTestLesson",function(t){t.preventDefault();var n=e(this);a(e("#addTestLessonModal form"),n)}),e("body").on("click",".edit-test-lesson",function(t){t.preventDefault();var a=e(this);loadingSwl(),d(a)}),e("body").on("change",".js-edit-text-locale-ajax",function(t){t.preventDefault();var a=e(this),n=a.val();d(a,n)}),e("body").on("change",'select[name="type"]',function(){var t=!0;"webinar"!==this.value&&(t=!1);for(var a=0,n=["capacity","start_date"];a<n.length;a++){var i=n[a];t?e(".js-"+i).removeClass("d-none"):e(".js-"+i).addClass("d-none")}})}(jQuery);
